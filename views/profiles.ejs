<!DOCTYPE html>
<html>
<head>
  <title>Dating Profiles</title>
</head>
<body>
  <h2>D&D Dating Profiles</h2>

  <p><a href="/">Home</a></p>

  <h3>Create profile</h3>
  <form method="POST" action="/profiles">
    <input name="name" placeholder="Name" required />
      <select name="race" required>
        <option value="">Select race</option>
        <% races.forEach(r => { %>
          <option value="<%= r %>"><%= r %></option>
        <% }) %>
      </select>
      <select name="class" required>
        <option value="">Select class</option>
        <% classes.forEach(c => { %>
          <option value="<%= c %>"><%= c %></option>
        <% }) %>
      </select>
    <input name="level" type="number" min="1" max="20" placeholder="Level" required />
    <input name="bio" placeholder="Short bio" style="width: 360px" />
    <button type="submit">Create</button>
  </form>

  <hr />

  <% if (profiles.length === 0) { %>
    <p>No profiles yet.</p>
  <% } else { %>
    <table border="1" cellpadding="6">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Race</th>
        <th>Class</th>
        <th>Level</th>
        <th>Bio</th>
        <th>Actions</th>
      </tr>

      <% profiles.forEach(p => { %>
        <tr>
          <td><%= p.profile_id %></td>
          <td><%= p.name %></td>
          <td><%= p.race %></td>
          <td><%= p.class %></td>
          <td><%= p.level %></td>
          <td><%= p.bio || "" %></td>
          <td>
            <a href="/profiles/<%= p.profile_id %>/edit">Edit</a>
            <form method="POST" action="/profiles/<%= p.profile_id %>/delete" style="display:inline">
              <button type="submit" onclick="return confirm('Delete this profile?')">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </table>
  <% } %>
</body>
</html>
